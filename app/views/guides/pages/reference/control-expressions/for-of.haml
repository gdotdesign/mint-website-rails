- set_meta_tags title: 'Guide / Reference / Control Expressions / for'

%h1 for...of

%p
  %code for...of
  is useful for iterating over either an
  %code Array(a)
  or a
  %code Set(a)
  or a
  %code Map(a,b)

%p
  The result of the iteration is always an array where the type of its items
  is from the type of the expression.

%p In the next example we iterate over an array of Strings and making them uppercase:

%pre
  %code
    :escaped
      for item of ["bob", "joe"] {
        String.toUpperCase(item)
      }
      /* The result will be ["BOB", "JOE"] */

%p or in this example you can iterate over a map:

%pre
  %code
    :escaped
      let map =
        Map.empty()
        |> Map.set("name", "bob")
        |> Map.set("age", "33")

      for key, value of map {
        String.toUpperCase("\#{key}: \#{value}")
      }
      /* The result will be ["name: bob", "age: 33"] */

%p
  The return type of this
  %code for...of
  expression is
  = succeed "." do
    %code Array(String)

%h2 Selecting items

%p
  You can limit the items for which the iteration should take place with an
  optional
  %code when
  block:

%pre
  %code
    :escaped
      for item of ["bob", "joe"] {
        String.toUpperCase(item)
      } when {
        item == "bob"
      }
      /* The result will be ["BOB"] */

%p
  In the example we specified that the expression should only run (and return)
  for items which equals "bob".
